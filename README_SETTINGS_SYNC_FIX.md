# 設定面板和設定對話框同步問題修復

## 問題描述

在實時物品監測系統中，設定面板和設定對話框之間的數值同步存在問題，導致用戶在設定對話框中修改設定後，設定面板中的數值沒有正確更新，反之亦然。

## 修復方案

我們對以下檔案進行了修改，以解決設定面板和設定對話框之間的數值同步問題：

### 1. `controllers/system_controller.py`

- 修改 `_on_settings` 方法，確保在設定對話框關閉後，正確更新設定面板中的數值。
- 修改 `handle_apply_settings` 方法，確保在設定面板中套用設定後，正確更新設定對話框中的數值。
- 在更新設定面板時，直接更新輸入框的值，確保 UI 顯示正確的數值。

### 2. `views/components/settings_panel.py`

- 修改 `__init__` 方法，確保在初始化時正確載入設定。
- 修改 `load_config` 方法，優先使用帶前綴的鍵名，如果找不到則嘗試使用不帶前綴的鍵名，確保設定值的一致性。
- 修改 `update_ui` 方法，確保 UI 元件正確顯示當前設定值。
- 修改 `create_widgets` 方法，確保在創建 UI 元件後更新 UI。

### 3. `views/components/setting/settings_dialog.py`

- 修改 `create_detection_settings` 方法，優先使用帶前綴的鍵名，如果找不到則嘗試使用不帶前綴的鍵名，確保設定值的一致性。

## 測試方法

我們創建了一個測試腳本 `test_settings_sync.py`，用於驗證設定檔案是否存在並讀取設定值。測試結果顯示，設定檔案中的設定值與預期一致。

## 結論

通過以上修改，我們解決了設定面板和設定對話框之間的數值同步問題，確保用戶在任一處修改設定後，另一處都能正確顯示最新的設定值。這提高了系統的可用性和用戶體驗。 